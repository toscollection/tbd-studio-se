<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension-point id="nosql_factory" name="Nosql Factory" schema="schema/nosql_factory.exsd"/>
   <extension
         point="org.eclipse.ui.navigator.navigatorContent">
      <navigatorContent
            activeByDefault="true"
            appearsBefore="org.talend.repository.viewer.metadata.hadoopcluster"
            contentProvider="org.talend.repository.nosql.ui.content.MetadataNoSQLConnectionsContentProvider"
            icon="icons/nosqlConnectionsNode.gif"
            id="org.talend.repository.viewer.metadata.noSQLConnections"
            labelProvider="org.talend.repository.viewer.label.RepositoryViewLabelProvider"
            name="NoSQL connections"
            priority="high">
         <triggerPoints>
            <and>
               <instanceof
                     value="org.talend.repository.model.RepositoryNode">
               </instanceof>
               <or>
                  <test
                        forcePluginActivation="true"
                        property="org.talend.repository.node.isMetadataTopNode">
                  </test>
                  <test
                        property="org.talend.repository.node.metadata.isNoSQLConnection">
                  </test>
               </or>
            </and>
         </triggerPoints>
         <possibleChildren>
            <and>
               <instanceof
                     value="org.talend.repository.model.RepositoryNode">
               </instanceof>
               <or>
                  <test
                        property="org.talend.repository.node.metadata.isNoSQLConnection">
                  </test>
                  <test
                        property="org.talend.repository.node.metadata.isSchemaColumn">
                  </test>
                  <test
                        property="org.talend.repository.node.metadata.isSchema">
                  </test>
               </or>
            </and>
         </possibleChildren>
         <actionProvider
               class="org.talend.repository.nosql.ui.provider.NoSQLNodeActionProvider"
               id="org.talend.repository.metadata.nosql.action.provider.id">
            <enablement>
               <and>
                  <instanceof
                        value="org.talend.repository.model.RepositoryNode">
                  </instanceof>
                  <test
                        forcePluginActivation="true"
                        property="org.talend.repository.node.metadata.isNoSQLConnection">
                  </test>
                  <not>
                     <test
                           forcePluginActivation="true"
                           property="org.talend.repository.node.isDeleted">
                     </test>
                  </not>
               </and>
            </enablement>
         </actionProvider>
      </navigatorContent>
   </extension>
   <extension
         point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
            class="org.talend.repository.nosql.ui.tester.NoSQLMetadataNodeTester"
            id="org.talend.repository.node.tester.metadata.nosql"
            namespace="org.talend.repository.node.metadata"
            properties="isNoSQLConnection"
            type="org.talend.repository.model.RepositoryNode">
      </propertyTester>
   </extension>
   <extension
         point="org.talend.core.repository.repository_node_provider">
      <repositoryNode
            alias="%repository.metadataNoSQLConnections.alias"
            folder="metadata/noSQLConnections"
            icon="icons/nosqlConnectionsNode.gif"
            isResouce="true"
            key="repository.metadataNoSQLConnections"
            label="%repository.metadataNoSQLConnection"
            ordinal="32"
            parentNodeType="METADATA"
            products="DI"
            type="METADATA_NOSQL_CONNECTIONS">
      </repositoryNode>
   </extension>
   <extension
         point="org.talend.core.repository.repository_content">
      <RepositoryContent
            class="org.talend.repository.nosql.ui.view.handler.NoSQLRepositoryContentHandler">
      </RepositoryContent>
   </extension>
   <extension
         point="org.talend.repository.items.importexport.handler">
      <importItemsProvider
            id="org.talend.repository.metadata.importProvider.nosql"
            name="NoSQL Import"
            priority="LOW">
         <importItemsHandler
               class="org.talend.repository.nosql.ui.view.handler.NoSQLImportHandler">
            <parameter
                  name="type"
                  value="METADATA_NOSQL_CONNECTIONS">
            </parameter>
         </importItemsHandler>
      </importItemsProvider>
   </extension>
   <extension
         point="org.talend.core.repositoryContextualsActions">
      <Action
            class="org.talend.repository.nosql.action.EditNoSQLPropertiesAction"
            id="org.talend.repository.nosql.action.EditNoSQLPropertiesAction"
            isPropertiesAction="true"
            name="Edit Properties">
      </Action>
      <Action
            class="org.talend.repository.nosql.action.CreateNoSQLConnectionAction"
            id="org.talend.repository.nosql.action.CreateNoSQLAction"
            isEditAction="true"
            isReadAction="true"
            level="10"
            name="Metadata/Create connection">
      </Action>
      <Action
            class="org.talend.repository.nosql.action.CreateNoSQLSchemaAction"
            id="org.talend.repository.nosql.action.CreateNoSQLSchemaAction"
            isEditAction="true"
            isReadAction="true"
            level="10"
            name="Metadata/Create table">
      </Action>
   </extension>
   <extension
         point="org.talend.repository.nosql.nosql_factory">
      <factory
            dbDNDProvider="org.talend.repository.nosql.db.provider.mongodb.MongoDBDNDProvider"
            dbMetadataProvider="org.talend.repository.nosql.db.provider.mongodb.MongoDBMetadataProvider"
            dbType="MONGODB"
            dbVersions="MONGODB_4_4_X;MONGODB_3_5_X;MONGODB_3_2_X;"
            dbWizPageProvider="org.talend.repository.nosql.db.provider.mongodb.MongoDBWizardPageProvider"
            description="MongoDB">
      </factory>
      <factory
            dbDNDProvider="org.talend.repository.nosql.db.provider.cassandra.CassandraDNDProvider"
            dbMetadataProvider="org.talend.repository.nosql.db.provider.cassandra.CassandraMetadataProvider"
            dbType="CASSANDRA"
            dbVersions="CASSANDRA_4_0;"
            dbWizPageProvider="org.talend.repository.nosql.db.provider.cassandra.CassandraWizardPageProvider"
            description="Cassandra">
      </factory>
      <factory
            dbDNDProvider="org.talend.repository.nosql.db.provider.neo4j.Neo4jDNDProvider"
            dbMetadataProvider="org.talend.repository.nosql.db.provider.neo4j.Neo4jMetadataProvider"
            dbType="NEO4J"
            dbVersions="NEO4J_3_2_X;"
            dbWizPageProvider="org.talend.repository.nosql.db.provider.neo4j.Neo4jWizardPageProvider"
            description="Neo4j">
      </factory>
   </extension>
   <extension
         point="org.talend.core.runtime.classloader_provider">
      <classloader
            index="NOSQL:MONGODB:MONGODB_3_2_X"
            libraries="mongo-java-driver-2.14.3.jar">
      </classloader>
      <classloader
            index="NOSQL:MONGODB:MONGODB_3_5_X"
            libraries="mongo-java-driver-3.12.11.jar">
      </classloader>
      <classloader
            index="NOSQL:MONGODB:MONGODB_4_4_X"
            libraries="mongodb-driver-core-4.10.2.jar;mongodb-driver-sync-4.10.2.jar;bson-4.10.2.jar">
      </classloader>
      <classloader
            index="NOSQL:CASSANDRA:CASSANDRA_4_0"
            libraries="java-driver-core-4.13.0.jar;netty-common-4.1.97.Final.jar;netty-buffer-4.1.97.Final.jar;netty-transport-4.1.97.Final.jar;netty-resolver-4.1.97.Final.jar;netty-handler-4.1.97.Final.jar;netty-codec-4.1.97.Final.jar;slf4j-api-1.7.7.jar;java-driver-shaded-guava-25.1-jre-graal-sub-1.jar;talend-cassandra-2.0.jar;config-1.4.1.jar;native-protocol-1.5.0.jar">
      </classloader>
      <classloader
            index="NOSQL:NEO4J:NEO4J_3_2_X"
            libraries="neo4j-java-driver-1.7.5.jar;bcpkix-jdk15on-1.70.jar;bcprov-jdk15on-1.70.jar;caffeine-2.3.3.jar;commons-compress-1.21.jar;commons-lang3-3.8.1.jar;concurrentlinkedhashmap-lru-1.4.2.jar;lucene-analyzers-common-5.5.0.jar;lucene-backward-codecs-5.5.0.jar;lucene-codecs-5.5.0.jar;lucene-core-5.5.0.jar;lucene-queryparser-5.5.0.jar;neo4j-rest-graphdb-2.0.1.jar;neo4j-3.2.6.jar;neo4j-codegen-3.2.6.jar;neo4j-collections-3.2.6.jar;neo4j-command-line-3.2.6.jar;neo4j-common-3.2.6.jar;neo4j-configuration-3.2.6.jar;neo4j-consistency-check-3.2.6.jar;neo4j-csv-3.2.6.jar;neo4j-cypher-3.2.6.jar;neo4j-cypher-compiler-2.3-2.3.11.jar;neo4j-cypher-compiler-3.1-3.1.6.jar;neo4j-cypher-compiler-3.2-3.2.6.jar;neo4j-cypher-frontend-2.3-2.3.11.jar;neo4j-cypher-frontend-3.1-3.1.6.jar;neo4j-cypher-frontend-3.2-3.2.6.jar;neo4j-cypher-ir-3.2-3.2.6.jar;neo4j-dbms-3.2.6.jar;neo4j-graph-algo-3.2.6.jar;neo4j-graph-matching-3.1.3.jar;neo4j-graphdb-api-3.2.6.jar;neo4j-import-tool-3.2.6.jar;neo4j-index-3.2.6.jar;neo4j-io-3.2.6.jar;neo4j-jmx-3.2.6.jar;neo4j-kernel-3.2.6.jar;neo4j-logging-3.2.6.jar;neo4j-lucene-index-3.2.6.jar;neo4j-lucene-upgrade-3.2.6.jar;neo4j-primitive-collections-3.2.6.jar;neo4j-resource-3.2.6.jar;neo4j-ssl-3.2.6.jar;neo4j-talend-component.jar;neo4j-udc-3.2.6.jar;neo4j-unsafe-3.2.6.jar;netty-all-4.1.86.Final.jar;opencsv-2.3.jar;parboiled-core-1.1.7.jar;parboiled-scala_2.11-1.1.7.jar;scala-library-2.11.8.jar;scala-reflect-2.11.8.jar">
      </classloader>
   </extension>
   <extension
         point="org.talend.core.repository.repository_handler">
      <RepositoryHandler
            class="org.talend.repository.nosql.ui.dnd.NoSQLDragAndDropHandler">
      </RepositoryHandler>
   </extension>

   <extension point="org.eclipse.emf.ecore.generated_package">
      <!-- @generated nosql -->
      <package
            uri="http://www.talend.org/nosql"
            class="org.talend.repository.model.nosql.NosqlPackage"
            genModel="model/nosql.genmodel"/>
   </extension>

   <extension point="org.eclipse.emf.ecore.extension_parser">
      <!-- @generated nosql -->
      <parser
            type="nosql"
            class="org.talend.repository.model.nosql.util.NosqlResourceFactoryImpl"/>
   </extension>
   <extension
         point="org.talend.core.migrationTask">
      <projecttask
            beforeLogon="false"
            breaks="5.6.0"
            class="org.talend.repository.nosql.repository.migration.UnifyPasswordEncryption4NoSQLConnectionMigrationTask"
            description="Unify the entryption for NoSQL password field"
            id="org.talend.repository.nosql.repository.migration.UnifyPasswordEncryption4NoSQLConnectionMigrationTask"
            name="UnifyPasswordEncryption4NoSQLConnectionMigrationTask"
            version="5.6.0">
      </projecttask>
      <projecttask
            beforeLogon="false"
            breaks="6.0.0"
            class="org.talend.repository.nosql.repository.migration.ChangeMongoDBConnectionMinimalVersionMigrationTask"
            id="org.talend.repository.nosql.repository.migration.ChangeMongoDBConnectionMinimalVersionMigrationTask"
            description="Change mongoDB connection version to 3.0.X"
            name="ChangeMongoDBConnectionMinimalVersionMigrationTask"
            version="6.0.0">
       </projecttask>
      <projecttask
            beforeLogon="false"
            breaks="6.0.1"
            class="org.talend.repository.nosql.repository.migration.FixCassandraDataStaxDbtypesProblemMigrationTask"
            description="Fix cassandra datastax api dbtype problem, please see TBD-2619"
            id="org.talend.repository.nosql.repository.migration.FixCassandraDataStaxDbtypesProblemMigrationTask"
            name="FixCassandraDataStaxDbtypesProblemMigrationTask"
            version="6.1.0">
      </projecttask>
   </extension>
   <extension
         point="org.talend.core.repository.repository_context">
      <RepositoryContext
            class="org.talend.repository.nosql.ui.context.handler.NoSQLRepositoryContextHandler">
      </RepositoryContext>
   </extension>
   <extension
         point="org.talend.core.runtime.service">
      <Service
            class="org.talend.repository.nosql.ui.context.handler.NoSqlContextUpdateService"
            serviceId="IRepositoryContextUpdateService">
      </Service>
      <Service
            class="org.talend.repository.nosql.service.NOSQLService"
            serviceId="INOSQLService">
      </Service>
   </extension>
   <extension
         point="org.talend.core.runtime.librariesNeeded">
        <libraryNeeded
        context="Needed for CASSANDRA_4_0"
        id="java-driver-core-4.13.0.jar"
        name="java-driver-core-4.13.0.jar" 
        mvn_uri="mvn:com.datastax.oss/java-driver-core/4.13.0">
      </libraryNeeded>
      <libraryNeeded
        context="Needed for CASSANDRA_4_0"
        id="config-1.4.1.jar"
        name="config-1.4.1.jar" 
        mvn_uri="mvn:com.typesafe/config/1.4.1">
      </libraryNeeded>
      <libraryNeeded
        context="Needed for CASSANDRA_4_0"
        id="java-driver-shaded-guava-25.1-jre-graal-sub-1.jar"
        name="java-driver-shaded-guava-25.1-jre-graal-sub-1.jar" 
        mvn_uri="mvn:com.datastax.oss/java-driver-shaded-guava/25.1-jre-graal-sub-1">
      </libraryNeeded>
      <libraryNeeded
        context="Needed for CASSANDRA_4_0"
        id="native-protocol-1.5.0.jar"
        name="native-protocol-1.5.0.jar" 
        mvn_uri="mvn:com.datastax.oss/native-protocol/1.5.0">
      </libraryNeeded>
       <libraryNeeded
        context="Needed for CASSANDRA_4_0"
        id="talend-cassandra-2.0.jar"
        name="talend-cassandra-2.0.jar" 
        mvn_uri="mvn:org.talend.components/talend-cassandra/2.0">
      </libraryNeeded>
      <libraryNeeded
        context="Needed for MongoDB Connection"
        id="mongo-java-driver-2.14.3.jar"
        name="mongo-java-driver-2.14.3.jar"
        mvn_uri="mvn:org.mongodb/mongo-java-driver/2.14.3">
      </libraryNeeded>
      <libraryNeeded
        context="Needed for MongoDB Connection"
        id="mongodb-driver-sync-4.10.2.jar"
        name="mongodb-driver-sync-4.10.2.jar"
        mvn_uri="mvn:org.mongodb/mongodb-driver-sync/4.10.2">
      </libraryNeeded>
      <libraryNeeded
        context="Needed for MongoDB Connection"
        id="mongodb-driver-core-4.10.2.jar"
        name="mongodb-driver-core-4.10.2.jar"
        mvn_uri="mvn:org.mongodb/mongodb-driver-core/4.10.2">
      </libraryNeeded>
      <libraryNeeded
        context="Needed for MongoDB Connection"
        id="bson-4.10.2.jar"
        name="bson-4.10.2.jar"
        mvn_uri="mvn:org.mongodb/bson/4.10.2">
      </libraryNeeded>

   </extension>
</plugin>
